#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include <time.h>

typedef struct lianbiao  
{
	int time[20];
	int	number;
	char name[10];
	int jinjia;
	int shoujia;
	int dazhe;
	int shuliang;
	char jieshao[60];
}LIANBIAO,*NODE;

LIANBIAO shangpin[100];
NODE	shangpin1[100];


	
void mima ()   //密码函数
{
	char a[20];
	char b[20];
	if(f())



int menu_select()                              
{
	int c=0;
	while(c>2&&c<0)
	{
		system("cls");
		printf("\t\t qTえTTTTTTTT■□■□TTTr\n");
		printf("\t\t│      超市自动售货。管理系统     │\n");
		printf("\t\ttTTT■□■□TTTTTTTTTTs\n");
		printf("\n");
		printf("\n");
		printf("\t\t  K▲▲▲▲▲▲▲▲▲▲▲L\n");
		printf("\t\t  ▲        1. 购买￥    2. 管理す	    \n");
		printf("\t\t  ▲                     0. 退出系统●      \n");
		printf("\t\t  ▲		        请您选择(0-2)       \n:");
		printf("\t\t  ▲☆o√e▲▲▲▲▲▲▲▲\n");
		printf("\t\t       北京时间");
		printf("\n");
		scanf("%d",&c);
	}
	return (c);                                      
}



int menu_select1()
{
	int i=0;                              
	system("cls");                                
	for(;;)                   
	{
		printf("             ----管理系统----\n");
		printf("\t1	货物浏览：\n");
		printf("\t2	货物添加：\n");
		printf("\t3	货物进价修改：\n");
		printf("\t4	货物售价修改：\n");
		printf("\t5	货物数量修改：\n");
		printf("\t6	货物介绍修改：\n");
		printf("\t7 货物删除: \n");
		printf("\t8 货物打折: \n");
		printf("\t9	退出系统：\n");
		printf("\t0	返回上一级：\n");
		scanf("%d",&i);
   }
	return i;
}



void liulan();
{
	FILE *fp;
    int i=0,n=0;
    system("cls");
	if((fp=fopen(shouhuo.txt,"r"))==NULL)             //以2进制方式读取文件信息//
	{
		printf("没打开对应文件\n");
		system("pause");
		return;
	 }
    while(!feof(fp))                              //一直读取知道文件尾结束
	{
		fread(&shangpin[i],sizeof(person),1,fp);  //以2进制方式将文件信息读到数组内存中//一次读取一个//
		i++;

	}
    fclose(fp);									//此处有可能存在bug；
}




void tianjia()		//添加物品；
{
	{
		FILE *fp;
		int i=0,n=0;
		int sign=1;                              
		system("cls");                                
		while(sign>=1&&sign<2) 
		{
			printf("             ----货物添加----\n");
			printf("商品单号：\n");
			scanf("\t%s",shangpin[i].number);
			printf("商品名字:\n");
			scanf("\t%s",shangpin[i].name);
			printf("商品进价:\n");
			scanf("\t%s",shangpin[i].jinjia);
			printf("售价：\n");
			scanf("\t%d",&shangpin[i].shoujia);
			printf("数量：\n");
			scanf("\t%d",&shangpin[i].shuliang);
			printf("商品介绍：\n");
			scanf("\t%d",&shangpin[i].jieshao);
			printf("是否继续添加?(yes[1]/no[2])");
			scanf("\t%d",&sign);
			i++;
			n=n+1;
			system( "cls ");
		}   system("pause");   
	if((fp=fopen(shouhuo.txt,"a"))==NULL)                    
	{
		printf("没有打开指定文件\n");
		system("pause");
		return;                                         
	}
	for(i=0;i<n;i++)
		if(fwrite(&shangpin[i],sizeof(LIANBIAO),1,fp)!=1)  

		else
		printf("FILE  错误\n");
	fclose(fp);                                     
	system("pasue");
}



void  jinjia()			//进价修改；
{
	FILE *fp;
	char a[20];
	int k;
	int j;
	int i=0;
	for(;;) 
	{
	printf("             ----进价修改----\n");
	printf("\t1 用商品单号修改：\n");
	printf("\t2 用商品名字修改：\n");
	printf("\t3 退出系统：");
	printf("\t0 返回上一级：");
	scanf("%d",&i);
	}
	switch(i)
	{	
		case 3: exit(0); 
		case 0: menu_select1();break;
	}
	if(i==1)
	{
		printf("请输入商品编号");
		scanf("%d",&j);
		for(i=0;i<n-1;i++)
			if(j==shangpin[i].number)
			{
				printf("请输入产品进价");
				scanf("%d",&shangpin[i].jinjia);
				printf("售价修改成功");

			}
	}
	if (i==2)
	{
			printf("请输入商品名字");
			gets(a);
			for(i=0;i<n-1;i++)
				if(a==shangpin[i].name)
				{
					printf("请输入产品进价");
					scanf("%d",&shangpin[i].jinjia);
					printf("售价修改成功");
				}

	}
	if((fp=fopen(shouhuo.txt,"w"))==NULL)                    
	{
		printf("没有打开指定文件\n");
		system("pause");
		return;                                         
	}
	for(i=0;i<n;i++)
		if(fwrite(&shangpin[i],sizeof(LIANBIAO),1,fp)!=1)  //正常返回次数n；
			
			else
			printf("FILE  错误\n");
		fclose(fp);                                     
	system("pasue");
}


void  shoujia()			//售价修改；
{
	char a[20];
	int k;
	int j;
	int i=0;
	for(;;) 
	{
		printf("             ----售价修改----\n");
		printf("\t1 用商品单号修改：\n");
		printf("\t2 用商品名字修改：\n");
		printf("\t3 退出系统：");
		printf("\t0 返回上一级：");
		scanf("%d",&i);
	}
	switch(i)
	{	
	case 3: exit(0); 
	case 0: menu_select1();break;
	}
	if(i==1)
	{
		printf("请输入商品编号");
		scanf("%d",&j);
		for(i=0;i<n-1;i++)
			if(j==shangpin[i].number)
			{
				printf("请输入产品售价");
				scanf("%d",&shangpin[i].shoujia);
				printf("售价修改成功");
				
			}
	}
	if (i==2)
	{
		printf("请输入商品名字");
		gets(a);
		for(i=0;i<n-1;i++)
			if(a==shangpin[i].name)
			{
				printf("请输入产品售价");
				scanf("%d",&shangpin[i].shoujia);
				printf("售价修改成功");
			}
			
	}
	if((fp=fopen(shouhuo.txt,"w"))==NULL)                    
	{
		printf("没有打开指定文件\n");
		system("pause");
		return;                                         
	}
	for(i=0;i<n;i++)
		if(fwrite(&shangpin[i],sizeof(LIANBIAO),1,fp)!=1)  //正常返回次数n；
			printf("FILE  错误\n");
		fclose(fp);                                     
		system("pasue");
}


void  shuliang()		//数量修改；
{
	char a[20];
	int k;
	int j;
	int i=0;
	for(;;) 
	{
		printf("             ----数量修改----\n");
		printf("\t1 用商品单号修改：\n");
		printf("\t2 用商品名字修改：\n");
		printf("\t3 退出系统：");
		printf("\t0 返回上一级：");
		scanf("%d",&i);
	}
	switch(i)
	{	
	case 3: exit(0); 
	case 0: menu_select1();break;
	}
	if(i==1)
	{
		printf("请输入商品编号");
		scanf("%d",&j);
		for(i=0;i<n-1;i++)
			if(j==shangpin[i].number)
			{
				printf("请输入产品数量");
				scanf("%d",&shangpin[i].shoujia);
				printf("数量修改成功");
				
			}
	}
	if (i==2)
	{
		printf("请输入商品名字");
		gets(a);
		for(i=0;i<n-1;i++)
			if(a==shangpin[i].name)
			{
				printf("请输入产品数量");
				scanf("%d",&shangpin[i].shoujia);
				printf("数量修改成功");
			}
			
	}
	if((fp=fopen(shouhuo.txt,"w"))==NULL)                    
	{
		printf("没有打开指定文件\n");
		system("pause");
		return;                                         
	}
	for(i=0;i<n;i++)
		if(fwrite(&shangpin[i],sizeof(LIANBIAO),1,fp)!=1)  //正常返回次数n；
			printf("FILE  错误\n");
		fclose(fp);                                     
		system("pasue");
}

void  jieshao()  //介绍修改
{
	char a[20];
	int k;
	int j;
	int i=0;
	for(;;) 
	{
		printf("             ----进价修改----\n");
		printf("\t1 用商品单号修改：\n");
		printf("\t2 用商品名字修改：\n");
		printf("\t3 退出系统：");
		printf("\t0 返回上一级：");
		scanf("%d",&i);
	}
	switch(i)
	{	
	case 3: exit(0); 
	case 0: menu_select1();break;
	}
	if(i==1)
	{
		printf("请输入商品编号");
		scanf("%d",&j);
		for(i=0;i<n-1;i++)
			if(j==shangpin[i].number)
			{
				printf("请输入产品介绍");
				scanf("%s",&shangpin[i].jieshao);
				printf("商品介绍修改成功");
				
			}
	}
	if (i==2)
	{
		printf("请输入商品名字");
		gets(a);
		for(i=0;i<n-1;i++)
			if(a==shangpin[i].name)
			{
				printf("请输入产品介绍");
				scanf("%s",&shangpin[i].jieshao);
				printf("商品介绍修改成功");
			}
			
	}
	if((fp=fopen(shouhuo.txt,"w"))==NULL)                    
	{
		printf("没有打开指定文件\n");
		system("pause");
		return;                                         
	}
	for(i=0;i<n;i++)
		if(fwrite(&shangpin[i],sizeof(LIANBIAO),1,fp)!=1)  //正常返回次数n；
			printf("FILE  错误\n");
		fclose(fp);                                     
		system("pasue");
}




void time ()
{
	long int t=0;
	char *day{}={"日","一","二","三","四","五","六"}
	struct tm *p;
	t=time(NULL)+8*3600；
	p=gmtime(&t);
	printf("%d年%02d月%02d日",(1900+p->tm_year),(1+p->tm_mon),p->tm_mday);
	printf("%s",day[p->tm_wday]);
	printf("%02d:%02d:%02d:\n",p->tm_hour,p->tm_min,p->tm_sec);

}


void dazhe()        //打折系统；
{
	int i;
	printf("             ----数量修改----\n");
	printf("\t1 按编号打折：\n");
	printf("\t2 按商品名称促销打折：\n");
	printf("\t3 返回上一级：\n");
	printf("\t0 结束程序：\n");
	scanf("%d",&i);
	switch(i)
	{	
	case 3: exit(0); 
	case 0: menu_select1();break;
	}
	if(i==1)
	{
		printf("请输入商品编号");
		scanf("%d",&j);
		for(i=0;i<n-1;i++)
			if(j==shangpin[i].number)
			{
				printf("产品的原始价格为%d",shangpin[i].shoujia);
				printf("请输入产品打折后的价钱");
				scanf("%d",&shangpin[i].dazhe);
				printf("商品打折成功");
				
			}
	}
	if (j==2)
	{
		printf("请输入商品名字");
		gets(a);
		for(i=0;i<n-1;i++)
			if(a==shangpin[i].name)
			{
				printf("产品的原始价格为%d",shangpin[i].shoujia);
				printf("请输入产品打折后的价格");
				scanf("%d",&shangpin[i].dazhe);
				printf("商品打折成功");
			}
			
	}
	if((fp=fopen(shouhuo.txt,"w"))==NULL)                    
	{
		printf("没有打开指定文件\n");
		system("pause");
		return;                                         
	}
	for(i=0;i<n;i++)
		if(fwrite(&shangpin[i],sizeof(LIANBIAO),1,fp)!=1)  //正常返回次数n；
			printf("FILE  错误\n");
		fclose(fp);                                     
	system("pasue");
}

void int menu_select2()
{
	printf("");//画点什么表示啥的；
	printf("\t\t  欢迎来到x x超市");
	printf(\t\t"");
	printf("");
}
